<div mat-dialog-title>
    <div class="flex justify-between items-center">
      <h2>{{ packagingForm.get('id')?.value ? 'Editar Embalagem' : 'Criar Embalagem' }}</h2>
      <button mat-icon-button mat-dialog-close>
        <mat-icon>close</mat-icon>
      </button>
    </div>
  </div>

  <mat-dialog-content class="flex-1">
    <form class="h-full flex flex-col gap-5" [formGroup]="packagingForm">
      <div class="flex w-full items-center flex-col">
        <div class="w-[40vh]">
          <app-image-selector [imagePath]="data.imagePath" (onSelectedImageChange)="onSelectImage($event)"></app-image-selector>
        </div>
      </div>

      <mat-form-field class="w-full">
        <mat-label>Nome da Embalagem</mat-label>
        <input matInput formControlName="name" />
        <mat-error *ngIf="packagingForm.get('name')?.hasError('required')">Nome é obrigatório</mat-error>
      </mat-form-field>

      <mat-form-field class="w-full">
        <mat-label>Comprimento (cm)</mat-label>
        <input matInput appReplaceDotWithComma type="text" formControlName="lenghtCm" />
        <mat-error *ngIf="packagingForm.get('lenghtCm')?.hasError('required')">Comprimento é obrigatório</mat-error>
        <mat-error *ngIf="packagingForm.get('lenghtCm')?.hasError('min')">O mínimo é 1,00</mat-error>
      </mat-form-field>

      <mat-form-field class="w-full">
        <mat-label>Largura (cm)</mat-label>
        <input matInput appReplaceDotWithComma type="text" formControlName="widthCm" />
        <mat-error *ngIf="packagingForm.get('widthCm')?.hasError('required')">Largura é obrigatória</mat-error>
        <mat-error *ngIf="packagingForm.get('widthCm')?.hasError('min')">O mínimo é 1,00</mat-error>
      </mat-form-field>

      <mat-form-field class="w-full">
        <mat-label>Espessura (cm)</mat-label>
        <input matInput appReplaceDotWithComma type="text" formControlName="thicknessCm" />
        <mat-error *ngIf="packagingForm.get('thicknessCm')?.hasError('required')">Espessura é obrigatória</mat-error>
        <mat-error *ngIf="packagingForm.get('thicknessCm')?.hasError('min')">O mínimo é 1,00</mat-error>
      </mat-form-field>

      <mat-form-field class="w-full">
        <mat-label>Volume (ml)</mat-label>
        <input matInput appReplaceDotWithComma type="text" formControlName="volumeMl" />
        <mat-error *ngIf="packagingForm.get('volumeMl')?.hasError('required')">Volume é obrigatório</mat-error>
        <mat-error *ngIf="packagingForm.get('volumeMl')?.hasError('min')">O mínimo é 1,00</mat-error>
      </mat-form-field>
    </form>
  </mat-dialog-content>

  <mat-dialog-actions>
    <div  class="flex justify-between w-full">
      <button mat-button mat-dialog-close>Cancelar</button>
      <button mat-raised-button color="primary" [disabled]="!packagingForm.valid" (click)="onSubmit()">Salvar</button>
    </div>
  </mat-dialog-actions>